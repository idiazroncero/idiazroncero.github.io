<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>¡Muerte al clearfix! Flexbox y los pseudo-elementos CSS</title>

  <meta name="description" content="Ayer, mientras trabajaba en la última versión de esta página, me encontré con uno de esos molestos momentos pero-qué-coj****-está-pasando que tanto ayudan a progresar en los escarpados senderos del CSS.">
  <!-- METATAGS DE FACEBOOK -->

<meta content="idiazroncero" property="og:site_name">

  <meta content="¡Muerte al clearfix! Flexbox y los pseudo-elementos CSS" property="og:title">


  <meta content="article" property="og:type">


  <meta content="Ayer, mientras trabajaba en la última versión de esta página, me encontré con uno de esos molestos momentos pero-qué-coj****-está-pasando que tanto ayudan a progresar en los escarpados senderos del CSS." property="og:description">


  <meta content="http://idiazroncero.com/diseno-web/clearfix-flexbox-y-pseudoelementos/" property="og:url">


  <meta content="2015-07-21T02:00:00+02:00" property="article:published_time">

<!--  TODO: Añadir una página de autor
<meta content="http://idiazroncero.com/about/" property="article:author">
 -->

  <meta content="http://idiazroncero.com/images/default.jpg" property="og:image"> 


  
  <meta content="diseno-web" property="article:section">
  


  
  <meta content="flexbox" property="article:tag">
  
  <meta content="css" property="article:tag">
  
  <meta content="sass" property="article:tag">
  
  <meta content="compass" property="article:tag">
  


<!-- METATAGS DE TWITTER -->

<meta content="@idiazroncero" name="twitter:site">

  <meta content="summary" name="twitter:card">



  <meta content="¡Muerte al clearfix! Flexbox y los pseudo-elementos CSS" name="twitter:title">



  <meta content="Ayer, mientras trabajaba en la última versión de esta página, me encontré con uno de esos molestos momentos pero-qué-coj****-está-pasando que tanto ayudan a progresar en los escarpados senderos del CSS." name="twitter:description">



  <meta content="http://idiazroncero.com/images/default.jpg" name="twitter:image"> 


  <link rel="icon" 
      type="image/png" 
      href="/favicon.png">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://idiazroncero.com/diseno-web/clearfix-flexbox-y-pseudoelementos/">
  <link rel="alternate" type="application/rss+xml" title="idiazroncero" href="http://idiazroncero.com/feed.xml" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="/js/prism.js"></script>
  <script src="/js/twitterfetcher.min.js"></script>
  <script src="/js/jquery.bxslider.min.js"></script>
  <script src="/js/script.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');  

    ga('create', 'UA-64546020-1', 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('send', 'pageview'); 

  </script>
</head>


  <body>
    <div class="container">
      <header class="header">
	<div class="idr" >
		<h1>
			<a href="/">
				<span class="idr-i">i</span><span class="idr-id">d</span><span class="idr-idi">i</span><span class="idr-idia">a</span><span class="idr-idiaz">z</span><span class="idr-idiaz_">.</span><span class="idr-idiaz_r">r</span><span class="idr-idiaz_ro">o</span><span class="idr-idiaz_ron">n</span><span class="idr-idiaz_ronc">c</span><span class="idr-idiaz_ronce">e</span><span class="idr-idiaz_roncer">r</span><span class="idr-idiaz_roncero">o</span>
			</a>
		</h1>
		<span class="idr-motto">Diseño web, periodismo, política y otras parafilias</span>
	</div>

	<nav class="mainmenu">
		<h1 class="esconder">Menú principal</h1>
		<div class="version">
			<p id="version-num">beta 0.7</p>
<!-- 			<div class="version-log">
				<p>¡estamos en beta!</p>
				<p>Últimos cambios:</p>
				<ul>
					<li>Rediseño de header</li>
					<li>Formato de fecha</li>
					<li>Nueva seccion "actualizado" en posts</li>
					<li>Twitter</li>
				</ul>
			</div> -->
		</div>
			
		<ul class="mainmenu-secciones">
			
				 
				<li><a href="/autobombo">


	

	



	autobombo


</a></li>
			
				 
				<li><a href="/apps">


	

	



	apps


</a></li>
			
				 
				<li><a href="/diseno-web">


	
		diseño web
		
	

	




</a></li>
			
				 
				<li><a href="/politica">


	

	
		política
		
	




</a></li>
			
		</ul>

		<div class="mainmenu-social">
			<a class="fa fa-rss-square" href="/rss"></a>

		
			<a href="https://github.com/idiazroncero" class="fa fa-github" target="_blank"></a>
		
		
			<a href="https://twitter.com/idiazroncero" class="fa fa-twitter" target="_blank"></a>
		
		
		</div>
	</nav>
</header>
      <div class="idr-separador"><hr/><span>{</span></div>
      <main class="content" role="main">
        <div class="content-wrapper">
          <article class="post">

  <header class="post-header">
    <h1 class="post-title">¡Muerte al clearfix! Flexbox y los pseudo-elementos CSS</h1>
    <div class="post-meta">
      <p>
        21 Jul 2015
        
        
  	     
  		    • 


	
		diseño web
		
	

	




 
  		  
      </p>
      <p class="post-tags">
        
          <span>flexbox</span>
        
          <span>css</span>
        
          <span>sass</span>
        
          <span>compass</span>
        
      </p>
    </div>
  </header>

  <div class="post-content">
    
    <p>Ayer, mientras trabajaba en <a href="https://github.com/idiazroncero/idiazroncero.github.io/commit/7ea365bd972fff99e2a5436e6084ef4ee3816a2e">la última versión de esta página</a>, me encontré con uno de esos molestos momentos <em>pero-qué-coj</em><em>****-está-pasando</em> que tanto ayudan a progresar en los escarpados senderos del CSS.</p>

<blockquote class="twitter-tweet" data-cards="hidden" lang="es"><p lang="es" dir="ltr">Tras un rato de romperme la cabeza, descubro que los pseudo-elementos CSS AFECTAN al flexbox. Pronto lo cuento en <a href="http://t.co/Xc9UquotU9">http://t.co/Xc9UquotU9</a></p>&mdash; Ignacio Díaz-Roncero (@idiazroncero) <a href="https://twitter.com/idiazroncero/status/623096651251625984">julio 20, 2015</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="el-diseo">El diseño</h2>

<p>El nuevo menú de idiazroncero.com está basado en tres bloques: el <code>div</code> de la izquierda contiene la versión actual de la web, el de la derecha las redes sociales y RSS y en el centro un <code>ul</code> contiene el menú de categorías.</p>

<p><img src="/images/flexbox01.png" alt="El diseño del menu" /></p>

<p>Para distribuir los tres elementos a lo ancho de su contenedor decidí optar por <code>flexbox</code>. El modelo de display <code>flex</code> es algo así como el mesías del CSS: anunciado desde hace años como la panacea de todos nuestros males, desde hace unos meses se considera ya maduro como para ser utilizado en navegadores modernos.</p>

<p>Para entender el por qué de tanta expectación, basta escuchar algunos gritos de la religión `flex:</p>

<ul>
  <li>
    <p><em>¡Muerte al float! ¡Larga vida al flex!</em></p>
  </li>
  <li>
    <p><em>¡Viva el centrado vertical! ¡Muerte al display:table-cell o al transform:translate(-50% -50%)!¡No mas position:absolute innecesario! ¡Viva el flex!</em></p>
  </li>
  <li>
    <p><em>¡Muerte al clearfix! ¡Larga vida al flex!</em></p>
  </li>
  <li>
    <p><em>¡No sé cuál es el height ni me importa! ¡Dame cualquier width! ¡Eres mi señor, oh flex!</em></p>
  </li>
</ul>

<p>(Algún día desarrollaré todo esto con más detalle)</p>

<p>En resumen: el modelo de caja <code>flex</code> permite solucionar la mayoría de problemas de posicionamiento y distibución de elementos, particularmente en ausencia de valores conocidos de alto y ancho.</p>

<p>Es por ello que decidí lanzarme a por la sintaxis <code>flex</code> y ordenar al contenedor de mi menú que distribuyese horizontalmente las tres cajas maximizando automáticamente el espacio entre ellas y provocando una alineacion perfecta izquierda-derecha-centro<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>.</p>

<div>
  <pre data-line=""><code class="language-scss">.mainmenu {
	@include display-flex();
	@include justify-content(space-between);
	border-top:1px solid $gris-medio;
	border-bottom:1px solid $gris-medio;
}</code></pre>
</div>

<h2 id="el-momento-waddafack">El momento waddafack?</h2>

<p>¿Pero qué coj<em>**</em>?</p>

<p><img src="/images/flexbox02.png" alt="Algo no va bien" /></p>

<p>¿De dónde sale ese espacio a la derecha?</p>

<p>Repasemos el tutorial <a href="http://flexboxin5.com/">flexbox in five minutes</a>. Caramba, aquí sí que sale bien.</p>

<p>Dado un <code>div</code> con <code>display:flex</code> que contiene tres elementos, dichos elementos pueden tener un valor explícito de alto y ancho o, como es mi caso, fluir y depender de su contenido.</p>

<p>Si se da un valor <code>justify-content: space-between</code>, la caja se encarga automáticamente de distribuir los tres elementos equitativamente en el plano horizontal:</p>

<figure>
	<a href="/images/flex-example1.png">
		<img src="/images/flex-example1.png" alt="Valores de justify-content.Fuente: http://www.ideago.co/" />
	</a>
<figcaption>
    Valores de justify-content.Fuente: http://www.ideago.co/
</figcaption>
</figure>

<p>Es decir: en mi caso, “beta” está en su sitio, pero el <code>ul</code> y los iconos no.</p>

<p>Y no, no me he dejado ningún elemento html suelto.</p>

<p>Una pena. Yo que estaba pensando en lo genial que es esto del <code>flex</code>. Fíjate que para conseguir esto mismo con <code>floats</code>, hubiera tenido que dar valores explícitos de ancho a cada elemento de modo que entre los tres sumaran el 100% del ancho. Y luego hubiera tenido que alinear el texto de uno a la izquierda, el otro al centro y el último a la derecha.</p>

<p>Y encima, el elemento contenedor habría perdido toda su altura al estar todos sus hijos flotados y tendría que haber añadido un <code>clearfix</code>.</p>

<p>Copón.</p>

<p>¡El <code>clearfix</code>! ¡Me lo había dejado encendido!</p>

<h2 id="los-pseudo-elementos-no-son-tan-pseudo">Los pseudo-elementos no son tan pseudo</h2>

<p>Puesto que mi primera opción fue usar floats, mi SCSS incluía un clearfix de Compass que utiliza la técnica de añadir un pseudo-elemento:</p>

<div>
  <pre data-line=""><code class="language-scss">.mainmenu {
	@include pie-clearfix();
}</code></pre>
</div>

<p>El pseudo-elemento añadido es el siguiente:</p>

<div>
  <pre data-line=""><code class="language-css">.mainmenu:after {
  content: &quot;&quot;;
  display: table;
  clear: both;
}</code></pre>
</div>

<p>Inspecciono el código y lo encuentro:</p>

<p><img src="/images/flexbox03.png" alt="El pseudo-elemento del horror" /></p>

<p>Este pseudo-elemento <strong>estaba siendo considerado por parte del <code>flexbox</code> como un elemento de pleno derecho</strong>, de modo que la caja estaba siendo <em>correctamente</em> dividida en cuatro porciones, no en tres.</p>

<p>A ojos de <code>flex</code>, no hay nada <em>pseudo</em> en un <code>:after</code>.</p>

<p>Como el pseudo-elemento no tiene <code>content</code> alguno, ni color, el resultado era un hueco en blanco.</p>

<p>Eliminado el innecesario clearfix, el menú vuelve a la normalidad y los tres bloques se distribuyen correctamente a lo ancho de su elemento padre.</p>

<p>Una vez más, la justicia CSS triunfa sobre el mal.</p>

<p>Y todo ello, gracias al <code>flexbox</code>.</p>

<p>¡Muerte al clearfix!</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Nótese que uso <code>@mixins</code> de Compass. Esto se debe a que la sintaxis de <code>flexbox</code> ha pasado por varias versiones, y muchos navegadores utilizan todavía todas o algunos propiedades deprecadas. Estos <code>@mixins</code> ayudan a proporcionar alternativas (fallbacks) para dichos navegadores. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </div>

  <footer>
    <h1 class="esconder">Comentarios</h1>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'idiazroncero';
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </footer>
</article>

        </div>
      </main>
      <div class="idr-separador"><hr/><span>}</span></div>
      <footer>
  <section>
    <h1 class="esconder">Pie de página</h1>
    <div class="footer-inner">  

      <section class="footer-descripcion">
        <h1 class="esconder">Descripción del sitio</h1>
        <p class="text">Un blog absolutamente desnortado en el que un día se habla de CSS3 y al siguiente de política iraní.
</p>
      </section>  

  <!--     <div class="footer-contacto">
        <ul>
          <li>idiazroncero</li>
          <li><a href="mailto:idiaz.roncero@gmail.com">idiaz.roncero@gmail.com</a></li>
        </ul>
      </div> <--> </-->

  		<section class="footer-reconocimientos">
        <h1 class="esconder">Reconocimientos</h1>
  			<p>Este blog se basa en <a href="http://jekyllrb.com/">Jekyll</a> y usa <a href="http://susy.oddbird.net/">Susy</a>, <a href="http://sass-lang.com/">Sass</a> y <a href="http://compass-style.org/">Compass</a>. Las tipografías son <a href="http://calendasplus.com/">Calendas Plus</a> y <a href="http://fontfabric.com/nexa-free-font/">Nexa</a>.
  		</section>

    </div>
  </section>
</footer>


  </div>

  </body>

</html>
